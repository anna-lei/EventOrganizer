<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

<ui:composition template="template.xhtml">
	<ui:define name="main.menu">
		<ui:include src="header.xhtml" />
	</ui:define>
	<ui:define name="main.content">
	
		<body>
			<head>
				<link rel="stylesheet" type="text/css" href="styles/style.css"></link>
			</head>

			<div class="context" style="text-align: left;">
			
<!-- 	TODO: Vielleicht kann das jetzt raus, weil ja ein neues Event hinzugef端gt wird		 -->
			<f:metadata>
				<f:viewParam name="eventid" value="#{managerBean.event}" converter="#{eventConverter}" converterMessage="Das Event wurde nicht gefunden" />
			</f:metadata>

				<h:outputLabel class="headline">Event hinzuf端gen</h:outputLabel>
				<br/> <br/>

				<h:form id="editform" class="form"> 
					<h:messages class="warning" for="edit" id="message"/>

					<table>
						<tr>
							<td><h:outputLabel>Titel: </h:outputLabel></td>
							<td><h:inputText  validatorMessage="Der Titel muss gef端llt sein und maximal 50 Zeichen umfassen."  value="#{managerBean.event.name}" class="inputText" a:autofocus="true">
									<f:validateLength minimum="1" maximum="50" />
								</h:inputText>
							</td>
						</tr>
						<tr>
							<td><h:outputLabel>Datum:</h:outputLabel></td>
							<td><h:inputText id="edit" value="#{managerBean.event.date}" class="inputText" converterMessage="Das Datum konnte nicht konvertiert werden. Es muss im folgenden Format angegeben werden: dd.MM.yyyy" validator="#{dateValidator.validate}" p:placeholder="dd.MM.yyyy">
									<f:convertDateTime pattern="dd.MM.yyyy"/>
								</h:inputText></td>
						</tr>
<!-- 						<tr> -->
<!-- 							<td><h:outputLabel>Uhrzeit: </h:outputLabel></td> -->
<!-- 							<td><h:inputText value="#{editEventBean.time}" class="inputText" /></td> -->
<!-- 						</tr> -->
						<tr>
							<td><h:outputLabel>Ort:</h:outputLabel></td>
							<td><h:inputText value="#{managerBean.event.location}" class="inputText" /></td>
						</tr>
						<tr>
							<td><h:outputLabel>Anzahl Tickets: </h:outputLabel></td>
							<td><h:inputText value="#{managerBean.event.numberOfTickets}" class="inputText" converterMessage="Es muss sich um eine ganze Zahl an Tickets handeln.">
							<f:convertNumber pattern="###.###" maxFractionDigits="0" /> </h:inputText></td>
						</tr>
						<tr>
							<td><h:outputLabel>Preis: </h:outputLabel></td>
							<td><h:inputText value="#{managerBean.event.price}" class="inputText" converterMessage="Der Preis muss zwei Nachkomma-Stellen haben." >
							<f:convertNumber pattern="####,##" maxFractionDigits="2" minFractionDigits="2" maxIntegerDigits="4" /></h:inputText></td>
						</tr>
						<tr>
							<td style="vertical-align:top;"><h:outputLabel>Beschreibung:</h:outputLabel></td>
							<td><h:inputTextarea value="#{managerBean.event.description}" class="inputText"  style="min-width: 500px; min-height: 150px;" validatorMessage="Die Beschreibung muss gef端llt sein und maximal 500 Zeichen umfassen.">
							<f:validateLength minimum="1" maximum="500" />
							</h:inputTextarea></td>
						</tr>
					</table>
					<br />

					<div class="buttonDiv" style="margin-right: 55%;">
					
<!-- 		TODO: muss bei Abbrechen nicht dann auch zu einer anderen Seite geleitet werden? -->
						<h:outputLink  value="#{managerBean.cancel()}" class="linkButton">
							<f:param name="eventid" value="#{managerBean.event.eventid}" />Abbrechen
						</h:outputLink>
						
						<h:commandLink rendered="#{empty managerBean.event.name}" class="button" action="#{managerBean.add}" value="Anlegen">
							 <f:attribute name="eventid" value="#{managerBean.event.eventid}" />
						</h:commandLink>
					</div>

				</h:form>
			</div>
		</body>

	</ui:define>
</ui:composition>
</html>