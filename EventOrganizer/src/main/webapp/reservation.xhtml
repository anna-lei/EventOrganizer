<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="template.xhtml">
	<ui:define name="main.menu">
		<ui:include src="header.xhtml" />
	</ui:define>
	<ui:define name="main.content">


		<!-- 	TODO: Hier muss noch das richtige Event übergeben werden. -->

		<body>
		<head>
<link rel="stylesheet" type="text/css" href="styles/style.css"></link>
<link rel="stylesheet" type="text/css" href="styles/eventDetail.css"></link>
		</head>

		<div class="context" style="text-align: left">
			<table>
				<tr>
					<td><h:outputLabel class="headline">Verbindliche Reservierung</h:outputLabel>
						<h:form>
							<br />
							<f:metadata>
								<f:viewParam name="eventid" value="#{reservationBean.event}"
									converter="#{eventConverter}"
									converterMessage="Das Event wurde nicht gefunden" />
								<f:viewParam name="selectedTickets"
									value="#{reservationBean.selectedTickets}" />
							</f:metadata>

							<table>
								<tr>
									<th>Titel:</th>
									<th><h:outputText value="#{reservationBean.event.name}"></h:outputText></th>
								</tr>
								<tr>
									<td>Datum:</td>
									<td><h:outputText value="#{reservationBean.event.date}" /></td>
								</tr>
								<tr>
									<td>Ort:</td>
									<td><h:outputText
											value="#{reservationBean.event.location}"></h:outputText></td>
								</tr>
								<tr>
									<td>Anzahl Tickets:</td>
									<td><h:outputText
											value="#{reservationBean.selectedTickets}"></h:outputText></td>
								</tr>
							</table>
							<br />


							<h:commandButton class="button"
								action="#{reservationBean.reserve}" value="Reservieren">
								<f:param name="eventid" value="#{reservationBean.event.eventid}" />
								<f:param name="selectedTickets"
									value="#{reservationBean.selectedTickets}" />
							</h:commandButton>
						</h:form></td>
					<h:outputText value="#{reservationBean.reservation.code}"></h:outputText>
					<h:outputLabel rendered="#{not empty reservationBean.reservation.code}" class="headline">Vielen Dank, #{loginService.activeUser.prename} !</h:outputLabel>
						<h:outputLabel rendered="#{not empty reservationBean.reservation.code}">Deine Ticketreservierung war erfolgreich.</h:outputLabel>
						<h:outputLabel rendered="#{not empty reservationBean.reservation.code}" value="Bestätigungscode:" /> 
						<h:outputText rendered="#{not empty reservationBean.reservation.code}" value="#{reservationBean.reservation.code}" ></h:outputText>
				</tr>

			</table>
		</div>
		</body>

	</ui:define>
</ui:composition>
</html>